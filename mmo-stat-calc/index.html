<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Equipment Combinator</title>
  <link rel="shortcut icon" href="favicon.ico">
  <link rel="stylesheet" href="index.css"/>
  <script src="DamageCalculator.js"></script>
  <script src="index.js"></script>
</head>
<body>
  <div class="container">
    <!-- Start of CuterCounter Code -->
    <div id="visitor-counter">
      <a href="https://www.cutercounter.com/" target="_blank"><img src="https://www.cutercounter.com/hits.php?id=hxpqnkd&nd=6&style=16" border="0" alt="counter for blog"></a>
    </div>
    <!-- End of CuterCounter Code -->
    <h1>Equipment Combinator</h1>
    <form id="statForm">
      <!-- <label for="damageType">Damage Type:</label>
      <select id="damageType">
        <option value="none">None</option>
        <option value="physical">Physical</option>
        <option value="magic">Magic</option>
      </select> -->

      <!-- <label for="boots">Boots:</label>
      <select id="boots" style="width: 160px;">
        <option value="any">any</option>
        <option value="0">四級鞋子</option>
        <option value="1">炙炎流星鞋子</option>
        <option value="2">日曜堅盾鞋子</option>
        <option value="3">弒神鞋子</option>
        <option value="4">霓虹伊甸鞋子</option>
        <option value="5">末日救贖鞋子</option>
      </select> -->

      <br>
      <div style="padding-bottom: 0px;font-family: Consolas, monospace; font-size: smaller;"> <!-- padding-top: 10px;  -->
        base stats are the sum stat of your worldboss accessory, armors, offhand, mainhand, and the base crit damage of 200.
      </div>

      <label for="basePhysical">Base Damage Bonus:</label>
      <div class="percentage-input">
        <input type="number" id="basePhysical" placeholder="Enter value">
      </div>
      
      <!-- <label for="baseMagic">Base Magic:</label>
      <input type="number" id="baseMagic" placeholder="Enter value"> -->
      
      <label for="baseCritChance">Base Crit Chance:</label>
      <div class="percentage-input">
        <input type="number" id="baseCritChance" placeholder="Enter value">
      </div>
      
      <label for="baseCritDmg">Base Crit Dmg:</label>
      <div class="percentage-input">
        <input type="number" id="baseCritDmg" placeholder="Enter value">
      </div>
      
      <label for="gemSlots">Gem Slots:</label>
      <input type="number" id="gemSlots" placeholder="Enter value" min="0" max="20">
      
      <label for="gemQuality">Gem Quality:</label>
      <div class="percentage-input">
        <input type="number" id="gemQuality" placeholder="Enter value" title="for *max*, input 99.5; for decent, input 95.">
      </div>

      <label for="critOnly">
        <input type="checkbox" id="critOnly"> 100% Crit Only
      </label>
      <br>
      <button type="button" onclick="calculateStats()">Calculate</button>
    </form>
  </div>

  <!-- Result Area -->
  <div class="result-area">
    <h2>Results</h2>
    <ul class="grid-container" id="resultGrid">
      <!-- Results will be appended here -->
    </ul>
  </div>
  <script>
    const cacheStr = window.localStorage.getItem('inputCache')
    if (cacheStr) {
      const cache = JSON.parse(cacheStr)
      if (Array.isArray(cache)) {
        // document.getElementById('damageType').value = cache[0]
        document.getElementById('basePhysical').value = cache[1]
        // document.getElementById('baseMagic').value = cache[2]
        document.getElementById('baseCritChance').value = cache[3]
        document.getElementById('baseCritDmg').value = cache[4]
        document.getElementById('gemSlots').value = cache[5]
        document.getElementById('critOnly').checked = cache[6]
      } else {
        const { basePhysical, baseCritChance, baseCritDmg, gemSlots, gemQuality, critOnly } = cache
        // document.getElementById('damageType').value = damageType ?? 'none'
        // document.getElementById('boots').value = bootIndex ?? 'any'
        document.getElementById('basePhysical').value = basePhysical ?? 0
        // document.getElementById('baseMagic').value = baseMagic ?? 0
        document.getElementById('baseCritChance').value = baseCritChance ?? 0
        document.getElementById('baseCritDmg').value = baseCritDmg ?? 200
        document.getElementById('gemSlots').value = gemSlots ?? 0
        document.getElementById('gemQuality').value = gemQuality ?? 99.5
        document.getElementById('critOnly').checked = critOnly ?? false
      }
    }
  </script>
</body>
</html>
